<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>R on </title>
    <link>/en/tags/r/</link>
    <description>Recent content in R on </description>
    <generator>Source Themes Academic (https://sourcethemes.com/academic/)</generator>
    <language>en-us</language>
    <copyright>&amp;copy; 2019</copyright>
    <lastBuildDate>Wed, 31 Jul 2019 18:55:57 -0600</lastBuildDate>
    
	    <atom:link href="/en/tags/r/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>Apply family functions - Part 2</title>
      <link>/en/post/2019-07-31-tapply/</link>
      <pubDate>Wed, 31 Jul 2019 18:55:57 -0600</pubDate>
      
      <guid>/en/post/2019-07-31-tapply/</guid>
      <description>


&lt;p&gt;In this second part of the post series on the apply family of functions, it is the &lt;code&gt;tapply()&lt;/code&gt; function. Unlike the &lt;code&gt;apply ()&lt;/code&gt; function discussed in the first post, the &lt;code&gt;tapply()&lt;/code&gt; function is often used to apply a function to subsets of a vector. Usually, when working with databases, there are variables of different nature, some can be numerical, others categorical, the idea of &lt;code&gt;tapply()&lt;/code&gt; is to obtain summaries of a vector but being grouped concerning other vectors (variables).&lt;/p&gt;
&lt;p&gt;On this occasion, we will use the starwars database seen in the post on the &lt;code&gt;inspectdf&lt;/code&gt; package again.&lt;/p&gt;
&lt;p&gt;If we need to know the average height of the characters, execute the following command.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;mean(starwars$height, na.rm = TRUE)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 174.358&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;However, it is more valuable to obtain the average height according to another variable of interest that allows us to make some comparison, such as gender. For this, we can use the &lt;code&gt;tapply()&lt;/code&gt; function.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;tapply(X=starwars$height,     
       INDEX=starwars$gender, 
       FUN=mean)              &lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##        female hermaphrodite          male          none 
##            NA           175            NA            NA&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The &lt;em&gt;NA&lt;/em&gt; that appear are due to missing values within the database, so the &lt;code&gt;mean()&lt;/code&gt; function does not calculate the average correctly unless an imputation of these missing values is made or indicated that the &lt;code&gt;mean()&lt;/code&gt; function must omit the missing values using the argument &lt;code&gt;na.rm = TRUE&lt;/code&gt;. In most of the &lt;code&gt;apply&lt;/code&gt; family functions, the arguments that belong to the function being applied (in this case &lt;code&gt;mean()&lt;/code&gt;) must go after the &lt;code&gt;FUN&lt;/code&gt; argument.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;tapply(X=starwars$height,     
       INDEX=starwars$gender,
       FUN=mean,              
       na.rm=TRUE)            &lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##        female hermaphrodite          male          none 
##      165.4706      175.0000      179.2373      200.0000&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The &lt;code&gt;tapply()&lt;/code&gt; function is not limited to a single grouping variable. The same “dimensions” concept that we discuss in the &lt;code&gt;apply ()&lt;/code&gt; function can be used to &lt;code&gt;tapply()&lt;/code&gt;, but this time the grouping variables must be specified within a list. As an example, suppose we are interested in the average height according to gender and eye color.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;tapply(X=starwars$height,
       INDEX=list(starwars$eye_color, starwars$gender), 
       FUN=mean, 
       na.rm=TRUE)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##               female hermaphrodite     male none
## black          195.5            NA 182.0000  NaN
## blue           167.0            NA 189.2308   NA
## blue-gray         NA            NA 182.0000   NA
## brown          160.0            NA 168.5000   NA
## dark              NA            NA      NaN   NA
## gold              NA            NA 191.0000   NA
## green, yellow     NA            NA 216.0000   NA
## hazel          178.0            NA 170.0000   NA
## orange            NA           175 181.2857   NA
## pink              NA            NA 180.0000   NA
## red               NA            NA 190.5000  200
## red, blue       96.0            NA       NA   NA
## unknown          NaN            NA 136.0000   NA
## white          178.0            NA       NA   NA
## yellow         168.0            NA 180.1111   NA&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We can add more grouping variables, but all of them must be within the list. For example, it is possible to grouping also by the skin color, although in this case, the result would show many missing values because not all combinations exist. That is a demonstration that each time we grouping variables, these groupings should make sense; otherwise, the analysis will not be useful.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;tapply(X=starwars$height,
       INDEX=list(starwars$eye_color, starwars$gender, starwars$skin_color), 
       FUN=mean, 
       na.rm=TRUE)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## , , blue
## 
##               female hermaphrodite male none
## black             NA            NA   NA   NA
## blue              NA            NA  196   NA
## blue-gray         NA            NA   NA   NA
## brown             NA            NA   NA   NA
## dark              NA            NA   NA   NA
## gold              NA            NA   NA   NA
## green, yellow     NA            NA   NA   NA
## hazel            178            NA   NA   NA
## orange            NA            NA   NA   NA
## pink              NA            NA   NA   NA
## red               NA            NA   NA   NA
## red, blue         NA            NA   NA   NA
## unknown           NA            NA   NA   NA
## white             NA            NA   NA   NA
## yellow            NA            NA   NA   NA
## 
## , , blue, grey
## 
##               female hermaphrodite  male none
## black             NA            NA    NA   NA
## blue              NA            NA    NA   NA
## blue-gray         NA            NA    NA   NA
## brown             NA            NA    NA   NA
## dark              NA            NA    NA   NA
## gold              NA            NA    NA   NA
## green, yellow     NA            NA    NA   NA
## hazel             NA            NA    NA   NA
## orange            NA            NA    NA   NA
## pink              NA            NA    NA   NA
## red               NA            NA    NA   NA
## red, blue         NA            NA    NA   NA
## unknown           NA            NA    NA   NA
## white             NA            NA    NA   NA
## yellow            NA            NA 115.5   NA
## 
## , , brown
## 
##               female hermaphrodite  male none
## black             NA            NA    NA   NA
## blue              NA            NA 234.0   NA
## blue-gray         NA            NA    NA   NA
## brown             NA            NA 129.5   NA
## dark              NA            NA    NA   NA
## gold              NA            NA    NA   NA
## green, yellow     NA            NA    NA   NA
## hazel             NA            NA    NA   NA
## orange            NA            NA    NA   NA
## pink              NA            NA    NA   NA
## red               NA            NA    NA   NA
## red, blue         NA            NA    NA   NA
## unknown           NA            NA    NA   NA
## white             NA            NA    NA   NA
## yellow            NA            NA 198.0   NA
## 
## , , brown mottle
## 
##               female hermaphrodite male none
## black             NA            NA   NA   NA
## blue              NA            NA   NA   NA
## blue-gray         NA            NA   NA   NA
## brown             NA            NA   NA   NA
## dark              NA            NA   NA   NA
## gold              NA            NA   NA   NA
## green, yellow     NA            NA   NA   NA
## hazel             NA            NA   NA   NA
## orange            NA            NA  180   NA
## pink              NA            NA   NA   NA
## red               NA            NA   NA   NA
## red, blue         NA            NA   NA   NA
## unknown           NA            NA   NA   NA
## white             NA            NA   NA   NA
## yellow            NA            NA   NA   NA
## 
## , , brown, white
## 
##               female hermaphrodite male none
## black             NA            NA   NA   NA
## blue              NA            NA   NA   NA
## blue-gray         NA            NA   NA   NA
## brown             NA            NA   NA   NA
## dark              NA            NA   NA   NA
## gold              NA            NA   NA   NA
## green, yellow     NA            NA  216   NA
## hazel             NA            NA   NA   NA
## orange            NA            NA   NA   NA
## pink              NA            NA   NA   NA
## red               NA            NA   NA   NA
## red, blue         NA            NA   NA   NA
## unknown           NA            NA   NA   NA
## white             NA            NA   NA   NA
## yellow            NA            NA   NA   NA
## 
## , , dark
## 
##               female hermaphrodite   male none
## black             NA            NA     NA   NA
## blue             184            NA     NA   NA
## blue-gray         NA            NA     NA   NA
## brown             NA            NA 183.25   NA
## dark              NA            NA    NaN   NA
## gold              NA            NA     NA   NA
## green, yellow     NA            NA     NA   NA
## hazel             NA            NA     NA   NA
## orange            NA            NA     NA   NA
## pink              NA            NA     NA   NA
## red               NA            NA     NA   NA
## red, blue         NA            NA     NA   NA
## unknown           NA            NA     NA   NA
## white             NA            NA     NA   NA
## yellow            NA            NA     NA   NA
## 
## , , fair
## 
##               female hermaphrodite     male none
## black             NA            NA       NA   NA
## blue           158.5            NA 181.1250   NA
## blue-gray         NA            NA 182.0000   NA
## brown          163.0            NA 185.3333   NA
## dark              NA            NA       NA   NA
## gold              NA            NA       NA   NA
## green, yellow     NA            NA       NA   NA
## hazel             NA            NA 170.0000   NA
## orange            NA            NA       NA   NA
## pink              NA            NA       NA   NA
## red               NA            NA       NA   NA
## red, blue         NA            NA       NA   NA
## unknown           NA            NA       NA   NA
## white             NA            NA       NA   NA
## yellow            NA            NA       NA   NA
## 
## , , fair, green, yellow
## 
##               female hermaphrodite male none
## black             NA            NA   NA   NA
## blue              NA            NA   NA   NA
## blue-gray         NA            NA   NA   NA
## brown             NA            NA   NA   NA
## dark              NA            NA   NA   NA
## gold              NA            NA   NA   NA
## green, yellow     NA            NA   NA   NA
## hazel             NA            NA   NA   NA
## orange            NA            NA   NA   NA
## pink              NA            NA   NA   NA
## red               NA            NA   NA   NA
## red, blue         NA            NA   NA   NA
## unknown           NA            NA   NA   NA
## white             NA            NA   NA   NA
## yellow           168            NA   NA   NA
## 
## , , gold
## 
##               female hermaphrodite male none
## black             NA            NA   NA   NA
## blue              NA            NA   NA   NA
## blue-gray         NA            NA   NA   NA
## brown             NA            NA   NA   NA
## dark              NA            NA   NA   NA
## gold              NA            NA   NA   NA
## green, yellow     NA            NA   NA   NA
## hazel             NA            NA   NA   NA
## orange            NA            NA   NA   NA
## pink              NA            NA   NA   NA
## red               NA            NA   NA   NA
## red, blue         NA            NA   NA   NA
## unknown           NA            NA   NA   NA
## white             NA            NA   NA   NA
## yellow            NA            NA   NA   NA
## 
## , , green
## 
##               female hermaphrodite  male none
## black             NA            NA 184.5   NA
## blue              NA            NA    NA   NA
## blue-gray         NA            NA    NA   NA
## brown             NA            NA  66.0   NA
## dark              NA            NA    NA   NA
## gold              NA            NA    NA   NA
## green, yellow     NA            NA    NA   NA
## hazel             NA            NA    NA   NA
## orange            NA            NA 206.0   NA
## pink              NA            NA    NA   NA
## red               NA            NA 190.0   NA
## red, blue         NA            NA    NA   NA
## unknown           NA            NA    NA   NA
## white             NA            NA    NA   NA
## yellow            NA            NA 183.0   NA
## 
## , , green-tan, brown
## 
##               female hermaphrodite male none
## black             NA            NA   NA   NA
## blue              NA            NA   NA   NA
## blue-gray         NA            NA   NA   NA
## brown             NA            NA   NA   NA
## dark              NA            NA   NA   NA
## gold              NA            NA   NA   NA
## green, yellow     NA            NA   NA   NA
## hazel             NA            NA   NA   NA
## orange            NA           175   NA   NA
## pink              NA            NA   NA   NA
## red               NA            NA   NA   NA
## red, blue         NA            NA   NA   NA
## unknown           NA            NA   NA   NA
## white             NA            NA   NA   NA
## yellow            NA            NA   NA   NA
## 
## , , green, grey
## 
##               female hermaphrodite male none
## black             NA            NA   NA   NA
## blue              NA            NA   NA   NA
## blue-gray         NA            NA   NA   NA
## brown             NA            NA   NA   NA
## dark              NA            NA   NA   NA
## gold              NA            NA   NA   NA
## green, yellow     NA            NA   NA   NA
## hazel             NA            NA   NA   NA
## orange            NA            NA   NA   NA
## pink              NA            NA   NA   NA
## red               NA            NA   NA   NA
## red, blue         NA            NA   NA   NA
## unknown           NA            NA  193   NA
## white             NA            NA   NA   NA
## yellow            NA            NA   NA   NA
## 
## , , grey
## 
##               female hermaphrodite     male none
## black            213            NA 198.3333   NA
## blue              NA            NA       NA   NA
## blue-gray         NA            NA       NA   NA
## brown             NA            NA       NA   NA
## dark              NA            NA       NA   NA
## gold              NA            NA 191.0000   NA
## green, yellow     NA            NA       NA   NA
## hazel             NA            NA       NA   NA
## orange            NA            NA 224.0000   NA
## pink              NA            NA       NA   NA
## red               NA            NA       NA   NA
## red, blue         NA            NA       NA   NA
## unknown           NA            NA       NA   NA
## white             NA            NA       NA   NA
## yellow            NA            NA       NA   NA
## 
## , , grey, blue
## 
##               female hermaphrodite male none
## black             NA            NA   NA   NA
## blue              NA            NA   NA   NA
## blue-gray         NA            NA   NA   NA
## brown             NA            NA   NA   NA
## dark              NA            NA   NA   NA
## gold              NA            NA   NA   NA
## green, yellow     NA            NA   NA   NA
## hazel             NA            NA   NA   NA
## orange            NA            NA   NA   NA
## pink              NA            NA   NA   NA
## red               NA            NA   NA   NA
## red, blue         NA            NA   NA   NA
## unknown           NA            NA   79   NA
## white             NA            NA   NA   NA
## yellow            NA            NA   NA   NA
## 
## , , grey, green, yellow
## 
##               female hermaphrodite male none
## black             NA            NA   NA   NA
## blue              NA            NA   NA   NA
## blue-gray         NA            NA   NA   NA
## brown             NA            NA   NA   NA
## dark              NA            NA   NA   NA
## gold              NA            NA   NA   NA
## green, yellow     NA            NA   NA   NA
## hazel             NA            NA   NA   NA
## orange            NA            NA  163   NA
## pink              NA            NA   NA   NA
## red               NA            NA   NA   NA
## red, blue         NA            NA   NA   NA
## unknown           NA            NA   NA   NA
## white             NA            NA   NA   NA
## yellow            NA            NA   NA   NA
## 
## , , grey, red
## 
##               female hermaphrodite male none
## black             NA            NA   NA   NA
## blue              NA            NA   NA   NA
## blue-gray         NA            NA   NA   NA
## brown             NA            NA   NA   NA
## dark              NA            NA   NA   NA
## gold              NA            NA   NA   NA
## green, yellow     NA            NA   NA   NA
## hazel             NA            NA   NA   NA
## orange            NA            NA  112   NA
## pink              NA            NA   NA   NA
## red               NA            NA   NA   NA
## red, blue         NA            NA   NA   NA
## unknown           NA            NA   NA   NA
## white             NA            NA   NA   NA
## yellow            NA            NA   NA   NA
## 
## , , light
## 
##               female hermaphrodite  male none
## black             NA            NA    NA   NA
## blue          165.00            NA 176.5   NA
## blue-gray         NA            NA    NA   NA
## brown         159.25            NA 185.5   NA
## dark              NA            NA    NA   NA
## gold              NA            NA    NA   NA
## green, yellow     NA            NA    NA   NA
## hazel            NaN            NA    NA   NA
## orange            NA            NA    NA   NA
## pink              NA            NA    NA   NA
## red               NA            NA    NA   NA
## red, blue         NA            NA    NA   NA
## unknown           NA            NA    NA   NA
## white             NA            NA    NA   NA
## yellow            NA            NA    NA   NA
## 
## , , metal
## 
##               female hermaphrodite male none
## black             NA            NA   NA   NA
## blue              NA            NA   NA   NA
## blue-gray         NA            NA   NA   NA
## brown             NA            NA   NA   NA
## dark              NA            NA   NA   NA
## gold              NA            NA   NA   NA
## green, yellow     NA            NA   NA   NA
## hazel             NA            NA   NA   NA
## orange            NA            NA   NA   NA
## pink              NA            NA   NA   NA
## red               NA            NA   NA  200
## red, blue         NA            NA   NA   NA
## unknown           NA            NA   NA   NA
## white             NA            NA   NA   NA
## yellow            NA            NA   NA   NA
## 
## , , mottled green
## 
##               female hermaphrodite male none
## black             NA            NA   NA   NA
## blue              NA            NA   NA   NA
## blue-gray         NA            NA   NA   NA
## brown             NA            NA   NA   NA
## dark              NA            NA   NA   NA
## gold              NA            NA   NA   NA
## green, yellow     NA            NA   NA   NA
## hazel             NA            NA   NA   NA
## orange            NA            NA   NA   NA
## pink              NA            NA   NA   NA
## red               NA            NA  191   NA
## red, blue         NA            NA   NA   NA
## unknown           NA            NA   NA   NA
## white             NA            NA   NA   NA
## yellow            NA            NA   NA   NA
## 
## , , none
## 
##               female hermaphrodite male none
## black             NA            NA   NA  NaN
## blue              NA            NA   NA   NA
## blue-gray         NA            NA   NA   NA
## brown             NA            NA   NA   NA
## dark              NA            NA   NA   NA
## gold              NA            NA   NA   NA
## green, yellow     NA            NA   NA   NA
## hazel             NA            NA   NA   NA
## orange            NA            NA   NA   NA
## pink              NA            NA   NA   NA
## red               NA            NA   NA   NA
## red, blue         NA            NA   NA   NA
## unknown           NA            NA   NA   NA
## white             NA            NA   NA   NA
## yellow            NA            NA   NA   NA
## 
## , , orange
## 
##               female hermaphrodite male none
## black             NA            NA  188   NA
## blue              NA            NA   NA   NA
## blue-gray         NA            NA   NA   NA
## brown             NA            NA   NA   NA
## dark              NA            NA   NA   NA
## gold              NA            NA   NA   NA
## green, yellow     NA            NA   NA   NA
## hazel             NA            NA   NA   NA
## orange            NA            NA  196   NA
## pink              NA            NA   NA   NA
## red               NA            NA   NA   NA
## red, blue         NA            NA   NA   NA
## unknown           NA            NA   NA   NA
## white             NA            NA   NA   NA
## yellow            NA            NA   NA   NA
## 
## , , pale
## 
##               female hermaphrodite male none
## black             NA            NA   NA   NA
## blue              NA            NA   NA   NA
## blue-gray         NA            NA   NA   NA
## brown             NA            NA   NA   NA
## dark              NA            NA   NA   NA
## gold              NA            NA   NA   NA
## green, yellow     NA            NA   NA   NA
## hazel             NA            NA   NA   NA
## orange            NA            NA  188   NA
## pink              NA            NA  180   NA
## red               NA            NA   NA   NA
## red, blue         NA            NA   NA   NA
## unknown           NA            NA   NA   NA
## white            178            NA   NA   NA
## yellow            NA            NA  184   NA
## 
## , , red
## 
##               female hermaphrodite male none
## black             NA            NA   NA   NA
## blue              NA            NA   NA   NA
## blue-gray         NA            NA   NA   NA
## brown             NA            NA   NA   NA
## dark              NA            NA   NA   NA
## gold              NA            NA   NA   NA
## green, yellow     NA            NA   NA   NA
## hazel             NA            NA   NA   NA
## orange            NA            NA   NA   NA
## pink              NA            NA   NA   NA
## red               NA            NA   NA   NA
## red, blue         NA            NA   NA   NA
## unknown           NA            NA   NA   NA
## white             NA            NA   NA   NA
## yellow            NA            NA  175   NA
## 
## , , red, blue, white
## 
##               female hermaphrodite male none
## black            178            NA   NA   NA
## blue              NA            NA   NA   NA
## blue-gray         NA            NA   NA   NA
## brown             NA            NA   NA   NA
## dark              NA            NA   NA   NA
## gold              NA            NA   NA   NA
## green, yellow     NA            NA   NA   NA
## hazel             NA            NA   NA   NA
## orange            NA            NA   NA   NA
## pink              NA            NA   NA   NA
## red               NA            NA   NA   NA
## red, blue         NA            NA   NA   NA
## unknown           NA            NA   NA   NA
## white             NA            NA   NA   NA
## yellow            NA            NA   NA   NA
## 
## , , silver, red
## 
##               female hermaphrodite male none
## black             NA            NA   NA   NA
## blue              NA            NA   NA   NA
## blue-gray         NA            NA   NA   NA
## brown             NA            NA   NA   NA
## dark              NA            NA   NA   NA
## gold              NA            NA   NA   NA
## green, yellow     NA            NA   NA   NA
## hazel             NA            NA   NA   NA
## orange            NA            NA   NA   NA
## pink              NA            NA   NA   NA
## red               NA            NA   NA   NA
## red, blue         96            NA   NA   NA
## unknown           NA            NA   NA   NA
## white             NA            NA   NA   NA
## yellow            NA            NA   NA   NA
## 
## , , tan
## 
##               female hermaphrodite male none
## black             NA            NA   NA   NA
## blue              NA            NA   NA   NA
## blue-gray         NA            NA   NA   NA
## brown             NA            NA  187   NA
## dark              NA            NA   NA   NA
## gold              NA            NA   NA   NA
## green, yellow     NA            NA   NA   NA
## hazel             NA            NA   NA   NA
## orange            NA            NA   NA   NA
## pink              NA            NA   NA   NA
## red               NA            NA   NA   NA
## red, blue         NA            NA   NA   NA
## unknown           NA            NA   NA   NA
## white             NA            NA   NA   NA
## yellow            NA            NA   NA   NA
## 
## , , unknown
## 
##               female hermaphrodite male none
## black             NA            NA   NA   NA
## blue              NA            NA  228   NA
## blue-gray         NA            NA   NA   NA
## brown             NA            NA   NA   NA
## dark              NA            NA   NA   NA
## gold              NA            NA   NA   NA
## green, yellow     NA            NA   NA   NA
## hazel             NA            NA   NA   NA
## orange            NA            NA   NA   NA
## pink              NA            NA   NA   NA
## red               NA            NA   NA   NA
## red, blue         NA            NA   NA   NA
## unknown          NaN            NA   NA   NA
## white             NA            NA   NA   NA
## yellow            NA            NA   NA   NA
## 
## , , white
## 
##               female hermaphrodite male none
## black             NA            NA   NA   NA
## blue              NA            NA   NA   NA
## blue-gray         NA            NA   NA   NA
## brown             NA            NA   NA   NA
## dark              NA            NA   NA   NA
## gold              NA            NA   NA   NA
## green, yellow     NA            NA   NA   NA
## hazel             NA            NA   NA   NA
## orange            NA            NA   NA   NA
## pink              NA            NA   NA   NA
## red               NA            NA   NA   NA
## red, blue         NA            NA   NA   NA
## unknown           NA            NA   NA   NA
## white             NA            NA   NA   NA
## yellow            NA            NA  233   NA
## 
## , , white, blue
## 
##               female hermaphrodite male none
## black             NA            NA  122   NA
## blue              NA            NA   NA   NA
## blue-gray         NA            NA   NA   NA
## brown             NA            NA   NA   NA
## dark              NA            NA   NA   NA
## gold              NA            NA   NA   NA
## green, yellow     NA            NA   NA   NA
## hazel             NA            NA   NA   NA
## orange            NA            NA   NA   NA
## pink              NA            NA   NA   NA
## red               NA            NA   NA   NA
## red, blue         NA            NA   NA   NA
## unknown           NA            NA   NA   NA
## white             NA            NA   NA   NA
## yellow            NA            NA   NA   NA
## 
## , , white, red
## 
##               female hermaphrodite male none
## black             NA            NA   NA   NA
## blue              NA            NA   NA   NA
## blue-gray         NA            NA   NA   NA
## brown             NA            NA   NA   NA
## dark              NA            NA   NA   NA
## gold              NA            NA   NA   NA
## green, yellow     NA            NA   NA   NA
## hazel             NA            NA   NA   NA
## orange            NA            NA   NA   NA
## pink              NA            NA   NA   NA
## red               NA            NA   NA   NA
## red, blue         NA            NA   NA   NA
## unknown           NA            NA   NA   NA
## white             NA            NA   NA   NA
## yellow            NA            NA   NA   NA
## 
## , , yellow
## 
##               female hermaphrodite male none
## black             NA            NA   NA   NA
## blue             168            NA   NA   NA
## blue-gray         NA            NA   NA   NA
## brown             NA            NA   NA   NA
## dark              NA            NA   NA   NA
## gold              NA            NA   NA   NA
## green, yellow     NA            NA   NA   NA
## hazel             NA            NA   NA   NA
## orange            NA            NA   NA   NA
## pink              NA            NA   NA   NA
## red               NA            NA   NA   NA
## red, blue         NA            NA   NA   NA
## unknown           NA            NA   NA   NA
## white             NA            NA   NA   NA
## yellow            NA            NA   NA   NA&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    <item>
      <title>Apply family functions - Part 1</title>
      <link>/en/post/2019-06-23-apply/</link>
      <pubDate>Sun, 21 Jul 2019 17:42:09 -0600</pubDate>
      
      <guid>/en/post/2019-06-23-apply/</guid>
      <description>


&lt;p&gt;The apply family functions belong to the R base package, they are especially useful when combining their use with functions to manipulate pieces of matrices, arrays, lists and data frames. These functions allow you to cross data in multiple ways to avoid the use of for loops that are usually computationally heavier.&lt;/p&gt;
&lt;p&gt;The first function we will talk about in this series is the &lt;code&gt;apply ()&lt;/code&gt; function, which in its simplest form of use is used to evaluate the margins (1 = rows or 2 = columns) of a matrix or an array to apply a function to them.&lt;/p&gt;
&lt;p&gt;As a first example, we start from a matrix with three rows and three columns.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;mat &amp;lt;- matrix(c(2, 4, 6, 7, 8, 9, 1, 12, 21), nrow = 3, ncol = 3)
mat&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##      [,1] [,2] [,3]
## [1,]    2    7    1
## [2,]    4    8   12
## [3,]    6    9   21&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;If you wish, for example, to obtain the sum of each column, you can use the &lt;code&gt;apply ()&lt;/code&gt; function as follows.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;apply(mat, 2, sum)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 12 24 34&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We can also calculate the average of each row.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;apply(mat, 1, mean)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1]  3.333333  8.000000 12.000000&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;There are also some functions already programmed in the R &lt;code&gt;base&lt;/code&gt; package that quickly replicate the previous results. For example, there is the &lt;code&gt;colSums ()&lt;/code&gt; function to calculate the amount of each column, and &lt;code&gt;rowMeans ()&lt;/code&gt; to obtain the arithmetic mean of each row.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;colSums(mat)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1] 12 24 34&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;rowMeans(mat)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## [1]  3.333333  8.000000 12.000000&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The two cases shown above exemplify a basic use of the &lt;code&gt;apply ()&lt;/code&gt; function, however, this function is much more powerful and is capable of working in a multidimensional way. Consider, for example, an object in two dimensions (rows and columns) similar to the one created previously, that is, an array.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;mat2 &amp;lt;- matrix(1:9, nrow = 3, ncol = 3)
mat2&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##      [,1] [,2] [,3]
## [1,]    1    4    7
## [2,]    2    5    8
## [3,]    3    6    9&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The &lt;code&gt;mat2&lt;/code&gt; object represents a particular case of an array, which can be created using the&lt;code&gt;array ()&lt;/code&gt;function.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;array(data=1:9, dim = c(3,3))&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##      [,1] [,2] [,3]
## [1,]    1    4    7
## [2,]    2    5    8
## [3,]    3    6    9&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The &lt;code&gt;array ()&lt;/code&gt; function also allows you to add tags to the rows and columns using its &lt;code&gt;dimnames&lt;/code&gt; argument.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;nombres.columnas &amp;lt;- c(&amp;quot;COL1&amp;quot;,&amp;quot;COL2&amp;quot;,&amp;quot;COL3&amp;quot;)
nombres.filas &amp;lt;- c(&amp;quot;FILA1&amp;quot;,&amp;quot;FILA2&amp;quot;,&amp;quot;FILA3&amp;quot;)
arreglo &amp;lt;- array(data=1:9, dim = c(3,3), 
                 dimnames = list(nombres.columnas, nombres.filas))
arreglo&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##      FILA1 FILA2 FILA3
## COL1     1     4     7
## COL2     2     5     8
## COL3     3     6     9&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We can add multiple dimensions to an array. For this, suppose you want to have the following sizes:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;DIM1: Numbers from 1 to 9.&lt;/li&gt;
&lt;li&gt;DIM2: Numbers from 1 to 9 multiplied by 10.&lt;/li&gt;
&lt;li&gt;DIM3: Numbers from 1 to 9 multiplied by 100.&lt;/li&gt;
&lt;li&gt;DIM4: Numbers from 1 to 9 increased by 1000.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;One way to generate the previous arrangement is by using the following code:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;nombres.dimensiones &amp;lt;- c(&amp;quot;DIM1&amp;quot;,&amp;quot;DIM2&amp;quot;,&amp;quot;DIM3&amp;quot;,&amp;quot;DIM4&amp;quot;)
arreglo &amp;lt;- array(data = c(seq(from=1, to=9, by=1),           #1 al 9
                          seq(from=10, to=90, by=10),        #10 al 90
                          seq(from=100, to=900, by=100),     #100 al 900
                          seq(from=1000, to=9000, by=1000)), #1000 al 9000
                 dim = c(3, 3, 4),                           #3 filas, 3 columnas y 4 dimensiones
                 dimnames = list(nombres.filas,
                                 nombres.columnas,
                                 nombres.dimensiones))
arreglo&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## , , DIM1
## 
##       COL1 COL2 COL3
## FILA1    1    4    7
## FILA2    2    5    8
## FILA3    3    6    9
## 
## , , DIM2
## 
##       COL1 COL2 COL3
## FILA1   10   40   70
## FILA2   20   50   80
## FILA3   30   60   90
## 
## , , DIM3
## 
##       COL1 COL2 COL3
## FILA1  100  400  700
## FILA2  200  500  800
## FILA3  300  600  900
## 
## , , DIM4
## 
##       COL1 COL2 COL3
## FILA1 1000 4000 7000
## FILA2 2000 5000 8000
## FILA3 3000 6000 9000&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Starting from the previous array, suppose that you want to obtain the maximum value per row from each dimension.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;apply(arreglo, c(3,1), max)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##      FILA1 FILA2 FILA3
## DIM1     7     8     9
## DIM2    70    80    90
## DIM3   700   800   900
## DIM4  7000  8000  9000&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Or, you may want to obtain the maximum value of each column from each dimension.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;apply(arreglo, c(3,2), max)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##      COL1 COL2 COL3
## DIM1    3    6    9
## DIM2   30   60   90
## DIM3  300  600  900
## DIM4 3000 6000 9000&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The following result shows the minimum of each column in each dimension.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;apply(arreglo, c(2,3), min)&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;##      DIM1 DIM2 DIM3 DIM4
## COL1    1   10  100 1000
## COL2    4   40  400 4000
## COL3    7   70  700 7000&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The previous examples can be applied to arrays with a higher dimension; for this, it is enough to have an adequate arrangement and operate on the corresponding margins with the &lt;code&gt;apply ()&lt;/code&gt; function.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Exploratory data analysis with categorical data</title>
      <link>/en/post/2019-06-23-exploraci%C3%B3n-de-datos-categ%C3%B3ricos-con-el-paquete-inspectdf/</link>
      <pubDate>Sun, 23 Jun 2019 13:42:09 -0600</pubDate>
      
      <guid>/en/post/2019-06-23-exploraci%C3%B3n-de-datos-categ%C3%B3ricos-con-el-paquete-inspectdf/</guid>
      <description>


&lt;p&gt;It is a common task to find datasets which have different types of variables, and they could be numeric, time data, or even categorical. The &lt;a href=&#34;https://github.com/alastairrushworth/inspectdf&#34;&gt;inspectdf&lt;/a&gt; package offers a set of functions to analyze the behavior of this kind of data.&lt;/p&gt;
&lt;p&gt;First of all, we have to install the package.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(devtools)
install_github(&amp;quot;alastairrushworth/inspectdf&amp;quot;)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;When we installed the package, it is necessary to load it. We do the same with &lt;code&gt;dplyr&lt;/code&gt; package, especially for use the pipe &lt;code&gt;%&amp;gt;%&lt;/code&gt;.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(inspectdf)
library(dplyr)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;For this example, the dataset &lt;code&gt;starwars&lt;/code&gt; will be used. This dataset is in &lt;code&gt;dplyr&lt;/code&gt; package and which has data from various characters in this cinematographic universe.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;starwars %&amp;gt;% 
    head()&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 6 x 13
##   name  height  mass hair_color skin_color eye_color birth_year gender
##   &amp;lt;chr&amp;gt;  &amp;lt;int&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;chr&amp;gt;      &amp;lt;chr&amp;gt;      &amp;lt;chr&amp;gt;          &amp;lt;dbl&amp;gt; &amp;lt;chr&amp;gt; 
## 1 Luke~    172    77 blond      fair       blue            19   male  
## 2 C-3PO    167    75 &amp;lt;NA&amp;gt;       gold       yellow         112   &amp;lt;NA&amp;gt;  
## 3 R2-D2     96    32 &amp;lt;NA&amp;gt;       white, bl~ red             33   &amp;lt;NA&amp;gt;  
## 4 Dart~    202   136 none       white      yellow          41.9 male  
## 5 Leia~    150    49 brown      light      brown           19   female
## 6 Owen~    178   120 brown, gr~ light      blue            52   male  
## # ... with 5 more variables: homeworld &amp;lt;chr&amp;gt;, species &amp;lt;chr&amp;gt;, films &amp;lt;list&amp;gt;,
## #   vehicles &amp;lt;list&amp;gt;, starships &amp;lt;list&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;div id=&#34;tabular-exploratory-data-analysis&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Tabular exploratory data analysis&lt;/h3&gt;
&lt;p&gt;The &lt;code&gt;inspectdf&lt;/code&gt; package allows you to calculate some descriptive statistics quickly for any variable using the&lt;code&gt;inspect_types()&lt;/code&gt;function.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;starwars %&amp;gt;% 
    inspect_types()&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 4 x 4
##   type        cnt  pcnt col_name 
##   &amp;lt;chr&amp;gt;     &amp;lt;int&amp;gt; &amp;lt;dbl&amp;gt; &amp;lt;list&amp;gt;   
## 1 character     7 53.8  &amp;lt;chr [7]&amp;gt;
## 2 list          3 23.1  &amp;lt;chr [3]&amp;gt;
## 3 numeric       2 15.4  &amp;lt;chr [2]&amp;gt;
## 4 integer       1  7.69 &amp;lt;chr [1]&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The previous result shows that there are seven variables of type &lt;code&gt;character&lt;/code&gt;, which represents 53.84% of the dataset. Also, there are two numerical variables, which represent 15.38%. The above is useful for a first look, but it is interesting to go a little further and describe all the variables in more detail. For this, the &lt;code&gt;inspect_cat ()&lt;/code&gt; function could be useful.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;starwars %&amp;gt;% 
    inspect_cat()&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 7 x 5
##   col_name     cnt common common_pcnt levels           
##   &amp;lt;chr&amp;gt;      &amp;lt;int&amp;gt; &amp;lt;chr&amp;gt;        &amp;lt;dbl&amp;gt; &amp;lt;list&amp;gt;           
## 1 eye_color     15 brown        24.1  &amp;lt;tibble [15 x 3]&amp;gt;
## 2 gender         5 male         71.3  &amp;lt;tibble [5 x 3]&amp;gt; 
## 3 hair_color    13 none         42.5  &amp;lt;tibble [13 x 3]&amp;gt;
## 4 homeworld     49 Naboo        12.6  &amp;lt;tibble [49 x 3]&amp;gt;
## 5 name          87 Ackbar        1.15 &amp;lt;tibble [87 x 3]&amp;gt;
## 6 skin_color    31 fair         19.5  &amp;lt;tibble [31 x 3]&amp;gt;
## 7 species       38 Human        40.2  &amp;lt;tibble [38 x 3]&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The &lt;code&gt;inspect_cat ()&lt;/code&gt; function shows in the first column the name of the variable, in the second one the number of unique values it contains, that is, the variable * eye_color * has 15 different levels, or what is the same, there are 15 colors and different eyes in the database. The third column shows the most common value that appears in the variable; for example, the most common species that appear in the dataset are humans. The fourth column indicates the percentage that represents the most common level; for example, the brown eyes represent 24.13% of all the colors present in the data. So what does the fifth column represent? Well, it is a list with the proportions of each level of the variable. Consider the * df * object from the previous result.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;df &amp;lt;- starwars %&amp;gt;% 
    inspect_cat()
df$levels$eye_color&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;## # A tibble: 15 x 3
##    value           prop   cnt
##    &amp;lt;chr&amp;gt;          &amp;lt;dbl&amp;gt; &amp;lt;int&amp;gt;
##  1 brown         0.241     21
##  2 blue          0.218     19
##  3 yellow        0.126     11
##  4 black         0.115     10
##  5 orange        0.0920     8
##  6 red           0.0575     5
##  7 hazel         0.0345     3
##  8 unknown       0.0345     3
##  9 blue-gray     0.0115     1
## 10 dark          0.0115     1
## 11 gold          0.0115     1
## 12 green, yellow 0.0115     1
## 13 pink          0.0115     1
## 14 red, blue     0.0115     1
## 15 white         0.0115     1&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The table above shows the proportion of each eye color. The same applies to any of the other variables.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;graphical-exploratory-data-analysis&#34; class=&#34;section level3&#34;&gt;
&lt;h3&gt;Graphical exploratory data analysis&lt;/h3&gt;
&lt;p&gt;Sometimes the numerical values are not easy to interpret it, either due to a quantity of data or due to visual issues. The &lt;code&gt;inspectdf&lt;/code&gt; package also graphically allows for exploratory data analysis.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;df %&amp;gt;% 
    show_plot()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/en/post/post1/2019-06-23-exploración-de-datos-categóricos-con-el-paquete-inspectdf_files/figure-html/unnamed-chunk-7-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;The previous result contains the same information as the &lt;code&gt;df&lt;/code&gt; object, but now it is easier, faster, and even easier to interpret. However, this result can be improved, because the variable * name * does not work much in the graph because all the names are different. It can solve by modifying the argument &lt;code&gt;high_cardinality&lt;/code&gt;, which means that only those categories that appear a certain number of times say four will be in the plot.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;df %&amp;gt;% 
    show_plot(high_cardinality = 4)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/en/post/post1/2019-06-23-exploración-de-datos-categóricos-con-el-paquete-inspectdf_files/figure-html/unnamed-chunk-8-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;p&gt;Finally, if the colors are not entirely pleasant, they can be manipulated through the five color palettes offered by the package, we only have to modify the &lt;code&gt;col_palette&lt;/code&gt; argument with numbers between one and five to achieve this.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;df %&amp;gt;% 
    show_plot(high_cardinality = 4, col_palette = 4)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/en/post/post1/2019-06-23-exploración-de-datos-categóricos-con-el-paquete-inspectdf_files/figure-html/unnamed-chunk-9-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;df %&amp;gt;% 
    show_plot(high_cardinality = 4, col_palette = 5)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;/en/post/post1/2019-06-23-exploración-de-datos-categóricos-con-el-paquete-inspectdf_files/figure-html/unnamed-chunk-9-2.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
  </channel>
</rss>
